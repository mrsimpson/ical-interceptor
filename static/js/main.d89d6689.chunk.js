(this["webpackJsonpcalendar-ui"]=this["webpackJsonpcalendar-ui"]||[]).push([[0],{18:function(e,t,r){e.exports=r(29)},25:function(e,t,r){},26:function(e,t,r){},27:function(e,t,r){},28:function(e,t,r){},29:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(14),l=r.n(i),s=r(2),o=r(3),c=r(5),u=r(4),p=r(6),h=r(7),d=r.n(h),m=r(10),f=r(15),v=r(8),b=r(16),g=r(17),y=r(24),k=r(13),w="https://mrsimpson.o6s.io/ical-interceptor";function S(e){return E.apply(this,arguments)}function E(){return(E=Object(m.a)(d.a.mark((function e(t){var r,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Supply a URL at which the ical can be retrieved");case 2:return n=t.match(new RegExp(w))?t:w+"/?url="+t,e.prev=3,e.next=6,y(n);case 6:return a=e.sent,e.t0=k,e.next=10,a.text();case 10:e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),e.next=17;break;case 14:e.prev=14,e.t2=e.catch(3),console.warn(t,e.t2);case 17:if(r&&0!==Object.keys(r).length){e.next=19;break}throw new Error("URL supplied does not yield a valid iCal calendar");case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}var j=r(13);var O=function(e){return e.map((function(e){if("PRIVATE"===e.getFirstPropertyValue("class"))return null;var t={title:e.getFirstPropertyValue("summary"),location:e.getFirstPropertyValue("location")},r=e.getFirstPropertyValue("rrule");if(null!=r){t.rrule={},r.freq&&(t.rrule.freq=r.freq),r.parts.BYDAY&&(t.rrule.byweekday=r.parts.BYDAY),r.until&&(t.rrule.until=r.until.toString()),r.until&&(t.rrule.until=r.until.toString()),r.interval&&(t.rrule.interval=r.interval);var n=e.getFirstPropertyValue("dtstart").toString(),a=e.getFirstPropertyValue("dtend").toString();t.rrule.dtstart=n;var i=new Date(n),l=new Date(a);t.duration=l-i}else t.start=e.getFirstPropertyValue("dtstart").toString(),t.end=e.getFirstPropertyValue("dtend").toString();return t}))},x=(r(25),function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={calendarEvents:[]},r}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.url||this.props.url===t.url){e.next=12;break}return e.prev=1,e.next=4,S(this.props.url);case 4:r=e.sent,a=r,n=new j.Component(a).getAllSubcomponents("vevent"),this.setState({calendarEvents:O(n)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}var a}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"preview"},a.a.createElement("div",{className:"preview-calendar"},a.a.createElement(f.a,{defaultView:"dayGridMonth",header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},plugins:[v.d,b.a,g.a],ref:this.calendarComponentRef,weekends:this.state.calendarWeekends,events:this.state.calendarEvents,dateClick:this.handleDateClick})),a.a.createElement("p",{className:"source-url"},"Source: ",this.props.url))}}]),t}(a.a.Component)),C=r(9),D=(r(26),function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={url:""},r.onSubmit=e.onSubmit,r.handleChange=r.handleChange.bind(Object(C.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(C.a)(r)),r}return Object(p.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({url:e.target.value})}},{key:"handleSubmit",value:function(e){this.onSubmit&&this.onSubmit(this.state.url),e.preventDefault()}},{key:"render",value:function(){return a.a.createElement("form",{className:"ical-source",onSubmit:this.handleSubmit},a.a.createElement("div",{className:"form-group"},a.a.createElement("span",null,"ical-URL"),a.a.createElement("input",{className:"form-field",type:"text",placeholder:"https://mrsimpson.o6s.io/ical-interceptor?url=https://outlook.office...ics?...",url:this.state.url,onChange:this.handleChange})))}}]),t}(a.a.Component)),P=(r(27),function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).setUrl=function(e){r.setState({url:e}),console.log("setURL",r.state.url)},r.state={url:""},r}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){console.log("UPDATED",this.state.url)}},{key:"render",value:function(){var e=this.state.url;return a.a.createElement("div",{className:"App"},a.a.createElement(D,{onSubmit:this.setUrl}),a.a.createElement(x,{url:e}))}}]),t}(a.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(28);l.a.render(a.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.d89d6689.chunk.js.map